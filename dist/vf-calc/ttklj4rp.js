/*! Built with http://stenciljs.com */
const{h:t}=window.VfCalc;let e="/wp-json/api/v1";window.location.host.includes("localhost")&&(e=`https://vestfoldfugl.devz.no${e}`);var n=function(t,e,n,s){return new(n||(n=Promise))(function(r,i){function o(t){try{l(s.next(t))}catch(t){i(t)}}function a(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(o,a)}l((s=s.apply(t,e||[])).next())})};function s(t,e,n){let{value:s,unit:r}=t;if(!s)return"";const i=s*n/(e||1);let o=i.toString();return"g"===r||"ml"===r?o=Math.round(i).toString():i%1&&(o=i.toFixed(1)),`${o} ${r||""}`}class r{constructor(){this.numPersons=1,this.defaultNum=1,this.ingredients=[],this.title="",this.addPerson=(t=>{t.preventDefault(),this.numPersons++,localStorage.setItem("numPersons",this.numPersons.toString())}),this.removePerson=(t=>{t.preventDefault(),this.numPersons>1&&this.numPersons--,localStorage.setItem("numPersons",this.numPersons.toString())})}componentDidLoad(){return n(this,void 0,void 0,function*(){const t=yield async function(t){try{const n=await fetch(`${e}/recipe/${t}`);return await n.json()}catch(t){return console.log(t),null}}(this.recipeId);if(!t)return;const n=localStorage.getItem("numPersons");this.defaultNum=parseInt(t.persons)||4,this.numPersons=parseInt(n)||this.defaultNum,this.ingredients=t.ingredients,this.title=t.ingredients_text||""})}render(){const{numPersons:e,defaultNum:n,ingredients:r}=this;return t("div",{class:"ingridient-wrapper"},t("header",null,t("h3",null,"Antall porsjoner"),t("div",null,t("a",{href:"",class:"minus",onClick:this.removePerson},"-"),t("span",null,e),t("a",{href:"",class:"plus",onClick:this.addPerson},"+"))),t("div",null,t("h4",null,"Ingredienser"),t("ul",null,r.map(r=>t("li",{class:"ingredient"},r.product?t("a",{href:`/produkter/${r.product.name}/`},s(r,n,e)," ",r.product.title):t("span",null,s(r,n,e)," ",r.name)))),t("div",{class:"recipe-tree"},t("div",{"data-anim":"blow","data-blow-dir":"1"}),t("div",{"data-anim":"blow","data-blow-dir":"1"}))))}static get is(){return"vf-calc"}static get properties(){return{defaultNum:{state:!0},ingredients:{state:!0},numPersons:{state:!0},recipeId:{type:Number,attr:"recipe-id"},title:{state:!0}}}}export{r as VfCalc};