/*! Built with http://stenciljs.com */
const{h:t}=window.VfCalc;let e="/wp-json/api/v1/recipe";window.location.host.includes("localhost")&&(e=`https://vestfoldfugl.devz.no${e}`);var n=function(t,e,n,s){return new(n||(n=Promise))(function(i,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function l(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,l)}a((s=s.apply(t,e||[])).next())})};class s{constructor(){this.numPersons=1,this.defaultNum=1,this.ingredients=[],this.title="",this.addPerson=(t=>{t.preventDefault(),this.numPersons++,localStorage.setItem("numPersons",this.numPersons.toString())}),this.removePerson=(t=>{t.preventDefault(),this.numPersons>1&&this.numPersons--,localStorage.setItem("numPersons",this.numPersons.toString())})}componentDidLoad(){return n(this,void 0,void 0,function*(){const t=yield async function(t){try{const n=await fetch(`${e}/${t}`);return await n.json()}catch(t){return console.log(t),null}}(this.recipeId);console.log("Recipe",this.recipeId,t);const n=localStorage.getItem("numPersons");this.numPersons=parseInt(n)||4,this.defaultNum=t.default_persons||4,this.ingredients=t.ingredients,this.title=t.ingredients_text})}render(){const{numPersons:e,defaultNum:n,ingredients:s}=this;return t("div",{class:"ingridient-wrapper"},t("header",null,t("h3",null,"Antall porsjoner"),t("div",null,t("a",{href:"",class:"minus",onClick:this.removePerson},"-"),t("span",null,e),t("a",{href:"",class:"plus",onClick:this.addPerson},"+"))),t("div",null,t("h4",null,"Ingredienser"),t("ul",null,s.map(s=>t("li",{class:"ingredient-text"},function(t,e,n){let{value:s,unit:i}=t;if(!s)return"";const r=s*n/(e||1);let o=r.toString();return"g"===i||"ml"===i?o=Math.round(r).toString():r%1&&(o=r.toFixed(1)),`${o} ${i||""}`}(s,n,e)," ",s.name))),t("div",{class:"recipe-tree"},t("div",{"data-anim":"blow","data-blow-dir":"1"}),t("div",{"data-anim":"blow","data-blow-dir":"1"}))))}static get is(){return"vf-calc"}static get properties(){return{defaultNum:{state:!0},ingredients:{state:!0},numPersons:{state:!0},recipeId:{type:Number,attr:"recipe-id"},title:{state:!0}}}}export{s as VfCalc};